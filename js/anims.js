animConfigs = {
  player:{
    anims:{
      // Starts with the animation mode - 'fly', 'float', 'die', etc..
      // frameCount is the number of frames of animation
      // frameX/frameY specify the starting frame location on the grid (default 0 if not specified)
      // frameRate: frames per second
      look:{
        imagePath: 'bug-look.png',
        frameRate:30,
        offsetX: 43.85,
        offsetY: 91,
        frames:[[2,2,88,91,0,43.85,91],[2,2,88,91,0,43.85,91],[92,2,88,91,0,43.85,91],[182,2,88,91,0,43.85,91],[182,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[362,2,88,91,0,43.85,91],[362,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[272,2,88,91,0,43.85,91],[182,2,88,91,0,43.85,91],[92,2,88,91,0,43.85,91],[2,2,88,91,0,43.85,91]]
      },
      bounce:{
        imagePath: 'bug-bounce.png',
        frameRate:30,
        offsetX: 43.85,
        offsetY: 91,
        frames:[[2,2,95,103,0,47.2,102.35],[99,2,95,103,0,47.2,102.35],[196,2,95,103,0,47.2,102.35],[293,2,95,103,0,47.2,102.35],[390,2,95,103,0,47.2,102.35],[2,107,95,103,0,47.2,102.35],[99,107,95,103,0,47.2,102.35],[196,107,95,103,0,47.2,102.35]]
      }
    },
    shapes:[
      {shape:pc.CollisionShape.RECT, offset:{w:-5, h:-5}}
    ]
  },
  mushroom1:{
    imagePath:"mushroom-1-bounce.png",
    anims: {
      idle:{
        frameRate: 1,
        holdOnEnd: true,
        loops: 1,
        offsetX: 124.5,
        offsetY: 247.5,
        frames:[[2,2,250,258,0,124.5,247.5]]
      },
      bounce:{
        frameRate:60,
        offsetX: 124.5,
        offsetY: 247.5,
        holdOnEnd: true,
        loops: 1,
        frames:[[254,2,250,258,0,124.5,247.5],[506,2,250,258,0,124.5,247.5],[758,2,250,258,0,124.5,247.5],[2,262,250,258,0,124.5,247.5],[254,262,250,258,0,124.5,247.5],[506,262,250,258,0,124.5,247.5],[758,262,250,258,0,124.5,247.5],[2,522,250,258,0,124.5,247.5],[2,2,250,258,0,124.5,247.5],[254,522,250,258,0,124.5,247.5],[506,522,250,258,0,124.5,247.5],[758,522,250,258,0,124.5,247.5],[2,2,250,258,0,124.5,247.5],[2,2,250,258,0,124.5,247.5]]
      }
    },
    shapes:[
      {shape:pc.CollisionShape.POLY, offset:{x:512-125,y:400-125}, points: [[-346, -323],[-291, -286],[-477, -278],[-440, -326],[-387, -344]]}
    ]
  },
  mushroom2:{
    imagePath:"mushroom_top_2.png",
    anims: {
      idle:{
        frameRate: 1,
        offsetX:103.65,
        offsetY:165,
        holdOnEnd:true,
        loops: 1,
        frames:[[2,2,208,175,0,103.65,165]]
      },
      bounce:{
        frameRate: 60,
        offsetX:103.65,
        offsetY:165,
        holdOnEnd:true,
        loops: 1,
        frames:[[2,2,208,175,0,103.65,165],[212,2,208,175,0,103.65,165],[422,2,208,175,0,103.65,165],[632,2,208,175,0,103.65,165],[2,179,208,175,0,103.65,165],[212,179,208,175,0,103.65,165],[422,179,208,175,0,103.65,165],[632,179,208,175,0,103.65,165],[2,356,208,175,0,103.65,165],[2,2,208,175,0,103.65,165],[212,356,208,175,0,103.65,165],[422,356,208,175,0,103.65,165],[212,356,208,175,0,103.65,165],[2,2,208,175,0,103.65,165],[2,2,208,175,0,103.65,165]]
      }
    },
    shapes:[
      {shape:pc.CollisionShape.POLY, offset:{x:450-104-2,y:300-100}, points: [[-426, -171],[-407, -245],[-346, -272],[-297, -241],[-271, -153]]}
    ]
  },
  mushroom3:{
    imagePath:"mushroom_3.png",
    anims: {
      idle:{
        frameRate: 1,
        offsetX: 70.05,
        offsetY: 146.5,
        holdOnEnd: true,
        loops: 1,
        frames:[[2,2,142,160,0,70.05,146.5]]
      },
      bounce:{
        frameRate:60,
        offsetX: 70.05,
        offsetY: 146.5,
        holdOnEnd: true,
        loops: 1,
        frames:[[146,2,142,160,0,70.05,146.5],[290,2,142,160,0,70.05,146.5],[434,2,142,160,0,70.05,146.5],[578,2,142,160,0,70.05,146.5],[722,2,142,160,0,70.05,146.5],[866,2,142,160,0,70.05,146.5],[2,164,142,160,0,70.05,146.5],[146,164,142,160,0,70.05,146.5],[290,164,142,160,0,70.05,146.5],[434,164,142,160,0,70.05,146.5],[578,164,142,160,0,70.05,146.5],[722,164,142,160,0,70.05,146.5],[2,2,142,160,0,70.05,146.5],[2,2,142,160,0,70.05,146.5]]
      }
    },
    shapes:[
      {shape:pc.CollisionShape.POLY, offset:{x:512-75,y:175-75}, points: [[-398, -104],[-388, -71],[-491, -75],[-479, -109],[-435, -127]]}
    ]
  },
  flower1:{
    imagePath:"flower.png",
    anims:{
      idle:{
        frameRate: 1,
        holdOnEnd: true,
        loops: 1,
        frames:[[2,2,255,214,0,0,0]]
      },
      bounce:{
        frameRate: 60,
        holdOnEnd: true,
        loops: 1,
        offsetX: 103.85,
        offsetY: 158.9,
        frames:[[259,2,265,219,0,103.85,158.9],[526,2,275,224,0,108.85,160.9],[2,228,284,229,0,113.85,161.9],[288,228,269,225,0,104.85,162.9],[559,228,257,227,0,96.85,167.9],[2,459,246,230,0,88.85,172.9],[250,459,247,222,0,91.85,164.9],[499,459,249,214,0,94.85,156.9],[750,459,255,214,0,97.85,156.9],[2,691,268,222,0,104.85,160.9],[272,691,280,230,0,110.85,163.9],[554,691,268,222,0,104.85,160.9],[2,2,255,214,0,97.85,156.9]]
      }
    },
    shapes:[
      {shape:pc.CollisionShape.POLY, offset:{x:512-107,y:512-125}, points: [[-460, -481],[-285, -365],[-409, -378]]}
    ]
  },
  orb:{
    anims: {
      pulse:{imagePath:'orb-pulse.png', frameRate:30, frames:[[2,2,100,90,0,49.7,44.5],[104,2,100,90,0,49.7,44.5],[206,2,100,90,0,49.7,44.5],[308,2,100,90,0,49.7,44.5],[410,2,100,90,0,49.7,44.5],[2,94,100,90,0,49.7,44.5],[104,94,100,90,0,49.7,44.5],[206,94,100,90,0,49.7,44.5],[104,94,100,90,0,49.7,44.5],[2,94,100,90,0,49.7,44.5],[410,2,100,90,0,49.7,44.5],[308,2,100,90,0,49.7,44.5],[206,2,100,90,0,49.7,44.5],[104,2,100,90,0,49.7,44.5],[308,94,100,90,0,49.7,44.5],[410,94,100,90,0,49.7,44.5],[2,186,100,90,0,49.7,44.5],[104,186,100,90,0,49.7,44.5],[206,186,100,90,0,49.7,44.5],[308,186,100,90,0,49.7,44.5],[410,186,100,90,0,49.7,44.5],[2,278,100,90,0,49.7,44.5],[104,278,100,90,0,49.7,44.5],[206,278,100,90,0,49.7,44.5],[308,278,100,90,0,49.7,44.5],[410,278,100,90,0,49.7,44.5],[308,94,100,90,0,49.7,44.5]]},
      pop:{imagePath:'orb-pop.png', frameRate:30, stopAtEnd:true, loops:1, frames:[[2,2,76,76,0,37.400000000000006,37.400000000000006],[80,2,118,118,0,58.400000000000006,58.400000000000006],[200,2,160,160,0,79.4,79.4],[2,164,202,202,0,100.4,100.4],[206,164,242,242,0,120.4,120.4],[2,408,284,284,0,141.4,141.4]]}
    },
    shapes:[
      {shape:pc.CollisionShape.CIRCLE, offset:{x:-50, y:-45, w:-70,h:-70}}
    ]
  },
  cutscene1:{
    imagePath:'cut_scene_1.png',
    anims: {
      intro:{
        frameRate:30,
        holdOnEnd: true,
        loops: 1,
        offsetX: 740,
        offsetY: 0,
        frames:[[2,2,204,170,0,101.64999999999998,84.5],[2,2,204,170,0,101.64999999999998,84.5],[2,2,204,170,0,101.64999999999998,84.5],[2,2,204,170,0,101.64999999999998,84.5],[2,2,204,170,0,101.64999999999998,84.5],[2,2,204,170,0,101.64999999999998,84.5],[2,2,204,170,0,101.64999999999998,84.5],[2,2,204,170,0,101.64999999999998,84.5],[2,2,204,170,0,101.64999999999998,84.5],[2,2,204,170,0,101.64999999999998,84.5],[2,2,204,170,0,101.64999999999998,84.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[208,2,681,312,0,578.65,226.5],[891,2,681,312,0,578.65,226.5],[2,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[685,316,681,312,0,578.65,226.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[2,630,1024,450,0,578.65,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[1028,630,547,450,0,101.64999999999998,364.5],[2,1082,547,450,0,101.64999999999998,364.5],[551,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[1100,1082,547,450,0,101.64999999999998,364.5],[2,2,204,170,0,101.64999999999998,84.5]]
      }
    }
  }
};

anims = {};

function setupAnims() {
  for(var k in animConfigs) {
    if(animConfigs.hasOwnProperty(k) && !(k in anims)) {
      var config = animConfigs[k];
      if('imagePath' in config)
        config.image = loadImage(config.imagePath);
      var frames = config.frames = [];
      var ss = anims[k] = new pc.SpriteSheet(config);
      var animDefs = config.anims;
      for(var animName in  animDefs) {
        if(animDefs.hasOwnProperty(animName)) {
          var anim = animDefs[animName];
          anim.name = animName;
          if('imagePath' in anim)
            anim.image = loadImage(anim.imagePath);
          if('frames' in anim) {
            var image = anim.image || config.image;
            if(!image) console.log('No image for animation '+animName+' for entity '+k);
            anim.frames.forEach(function(frame, n) {
              anim.frames[n] = [frames.length, 0]
              frame[4] = image;
              frames.push(frame);
            });
          }
        }
      }
      for(var animName in  animDefs) {
        if(animDefs.hasOwnProperty(animName)) {
          ss.addAnimation(animDefs[animName]);
        }
      }
    }
  }
}
function getAnim(k) {
  if(anims.hasOwnProperty(k))
    return anims[k];
  throw new Error("No animation '"+k+"'");
}
function getAnimShapes(k) {
  if(animConfigs.hasOwnProperty(k)) {
    return animConfigs[k].shapes;
  }
  throw new Error("No animation '"+k+"'");
}